{% extends 'layout.html' %}

{% block body %}
    <script>
        function togglefollowers() {
            theObj=document.getElementById('expandfollowers').style;
            if (theObj.display=="none")
                theObj.display="block";
            else
                theObj.display="none";
        }
    </script>
    <br>
    <table class="center" style="width: 100%">
    <tr valign="top">
        <td style="width: 13%;"><img src="{{user.avatar(70)}}"></td>
        <td class="left" style="width: 100%">
        <table>
            <tr valign="top"><td style="font-size: xx-large; color: #002a80;font-family: georgia, serif" ><b>{{user.nickname}}</b></td></tr>
            <tr>
                <td>
                    <p style="font-family: georgia, serif">
                        {% if user.about_me %}
                            Description: <i>{{ user.about_me }}</i><br>
                        {% endif %}
                        {% if user.last_seen %}
                            Last seen on: <i style="font-size: smaller">{{ momentjs(user.last_seen).calendar() }}</i>
                        {% endif %}
                    <br>
                    <button type="button" onclick="togglefollowers()"  style="border-style: hidden;background-color: transparent">
                        <b>{{ user.cntFollowers() }} followers</b></button>
                    {% if user.id == g.user.id %}
                        <a href="{{url_for('edit')}}" style="text-decoration-line: none">Edit</a>
                    {% elif not g.user.is_following(user) %}
                        <a href="{{ url_for('follow',email=user.email) }}" style="text-decoration-line: none">Follow</a>
                    {% else %}
                        <a href="{{ url_for('unfollow',email=user.email) }}" style="text-decoration-line: none">Unfollow</a>
                        {% if g.user.is_rejecting(user) %}
                            <a href="{{ url_for('unreject',email=user.email) }}" style="text-decoration-line: none">Unreject</a>
                        {% else %}
                            <a href="{{ url_for('reject',email=user.email) }}" style="text-decoration-line: none">Reject</a>
                        {% endif %}
                    {% endif %}
                    </p>
                </td>
            </tr>

{#        insert followers#}
        </table>
        </td>
    </tr>
    {% if user.cntFollowers()>0  %}
     <tr>
         <td></td>
         <td id="expandfollowers" style="display: none">
             {% include 'followers.html' %}
         </td>
     </tr>
    {% endif %}
    <tr>
        <td></td>
        <td>
            {% for post in posts %}
                {% include 'post.html' %}
            {% endfor %}
        </td>
    </tr>
    </table>
{#    <hr color=#988cb9 size="3">#}
{% endblock %}
{% block bodyright %}
    <br>
        <table class="left" >
            <tr>
                <th>
                    {% if user==g.user %}
                    <h4 style="color: #149bdf;font-family: georgia, serif">My followeds</h4>
                    {% else %}
                    <h4 style="color: #149bdf;font-family: georgia, serif">{{ user.nickname }}'s followeds</h4>
                    {% endif %}
                </th>
            </tr>
            {% if user.cntFolloweds()>0 %}
            <tr>
                <td align="left">{% include 'followeds.html' %}</td>
            </tr>
            {% endif %}
    </table>
{% endblock %}